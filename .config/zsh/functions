# ShellGPT
_sgpt_zsh() {
if [[ -n "$BUFFER" ]]; then
    _sgpt_prev_cmd=$BUFFER
    BUFFER+="âŒ›"
    zle -I && zle redisplay
    BUFFER=$(sgpt --shell <<< "$_sgpt_prev_cmd" --no-interaction)
    zle end-of-line
fi
}
zle -N _sgpt_zsh
bindkey ^p _sgpt_zsh

# tmux environment auto-update
if [[ -n "$TMUX" ]] && [[ -n "$SSH_CLIENT" ]]; then
    function refresh {
        eval $(tmux show-env -s SSH_AUTH_SOCK);
        eval $(tmux show-env -s DISPLAY);
    }
else
    function refresh { }
fi

function preexec {
    refresh;
}
